var cfp=cfp||{};cfp.investments_value={_calculators:null,_user:null,dom_form:null,_chart_growth_initialized:!1,_user_strings:{},_global_investment_data:{nb_years:0,initial_investment:0,regular_addition:0,addition_period_in_weeks:0,interest_rate_percent:0,interest_compounded_type_in_weeks:0,schedule:{year:[],annual_investment:[],cumulative_investment:[],annual_interest:[],total_interest_earned:[],value_initial_investment:[],value_addition:[],total_value_investments:[]}},init:function(t,e,_){this._user=t,this._calculators=e,this.dom_form=_,this._manage_user_strings(),this.reset_form()},_manage_user_strings:function(){"fr"===this._user.language?(this._user_strings.alert_term_years_too_high="Le maximum est 50",this._user_strings.alert_interest_rate_too_high="Le maximum est 99",this._user_strings.chart_growth_title_part1="Croissance de l'investissement pendant ",this._user_strings.chart_growth_title_part2=" années",this._user_strings.chart_growth_label_total_value_investment="Valeur totale des investissements",this._user_strings.chart_growth_label_total_interest_earned="Gain total en intérêt",this._user_strings.chart_growth_label_h_axis="Années"):"es"===this._user.language?(this._user_strings.alert_term_years_too_high="El máximo es de 50",this._user_strings.alert_interest_rate_too_high="El máximo es de 99",this._user_strings.chart_growth_title_part1="Crecimiento de la inversión en ",this._user_strings.chart_growth_title_part2=" años",this._user_strings.chart_growth_label_total_value_investment="Valor total de la inversión",this._user_strings.chart_growth_label_total_interest_earned="Total de intereses ganados",this._user_strings.chart_growth_label_h_axis="Años"):(this._user_strings.alert_term_years_too_high="The maximum is 50",this._user_strings.alert_interest_rate_too_high="The maximum is 99",this._user_strings.chart_growth_title_part1="Investment growth over ",this._user_strings.chart_growth_title_part2=" years",this._user_strings.chart_growth_label_total_value_investment="Total value of investment",this._user_strings.chart_growth_label_total_interest_earned="Total interest earned",this._user_strings.chart_growth_label_h_axis="Years")},reset_form:function(){$(".user_input",this.dom_form).removeClass("user_changed user_error"),this.dom_form.initial_investment.value=1e5,this.dom_form.regular_addition.value=500,cfp.ui.updateSelectField(this.dom_form.addition_period,"monthly"),this.dom_form.interest_rate.value=5,this.dom_form.term_years.value=30,cfp.ui.updateSelectField(this.dom_form.interest_compounded_type,"yearly"),this.update_form()},_validate_inputs:function(){return!!this._calculators.check_valid_number(this.dom_form.initial_investment,!1,!0,!0)&&(!!this._calculators.check_valid_number(this.dom_form.regular_addition,!1,!0,!0)&&(!!this._calculators.check_valid_number(this.dom_form.interest_rate,!0,!0,!1)&&!!this._calculators.check_valid_number(this.dom_form.term_years,!0,!0,!0)))},_update_schedule_obj:function(){var t=0;this._global_investment_data.schedule.month=[];for(var e='<table width="100%" class="figures">\n',_=0;_<=this._global_investment_data.nb_years;_++)this._global_investment_data.schedule.year[_]=_,this._global_investment_data.schedule.annual_investment[_]=0===_?this._calculators.roundNumber(this._global_investment_data.initial_investment,2):this._calculators.roundNumber(this._global_investment_data.regular_addition*this._global_investment_data.addition_period_in_weeks,0),this._global_investment_data.schedule.cumulative_investment[_]=0===_?0:this._calculators.roundNumber(this._global_investment_data.initial_investment+this._global_investment_data.regular_addition*this._global_investment_data.addition_period_in_weeks*_,0),this._global_investment_data.schedule.value_initial_investment[_]=0===_?this._global_investment_data.initial_investment:this._calculators.roundNumber(this._global_investment_data.initial_investment*Math.pow(1+this._global_investment_data.interest_rate_percent/this._global_investment_data.interest_compounded_type_in_weeks,_*this._global_investment_data.interest_compounded_type_in_weeks),0),this._global_investment_data.schedule.value_addition[_]=0===_?0:this._calculators.roundNumber(this._global_investment_data.regular_addition*(this._global_investment_data.addition_period_in_weeks/this._global_investment_data.interest_compounded_type_in_weeks+(this._global_investment_data.addition_period_in_weeks/this._global_investment_data.interest_compounded_type_in_weeks-1)/2*this._global_investment_data.interest_rate_percent/this._global_investment_data.interest_compounded_type_in_weeks)*(Math.pow(1+this._global_investment_data.interest_rate_percent/this._global_investment_data.interest_compounded_type_in_weeks,_*this._global_investment_data.interest_compounded_type_in_weeks)-1)/(this._global_investment_data.interest_rate_percent/this._global_investment_data.interest_compounded_type_in_weeks),0),this._global_investment_data.schedule.total_interest_earned[_]=0===_?0:this._calculators.roundNumber(this._global_investment_data.schedule.value_addition[_]+this._global_investment_data.schedule.value_initial_investment[_]-this._global_investment_data.schedule.cumulative_investment[_],0),this._global_investment_data.schedule.annual_interest[_]=0===_?0:this._calculators.roundNumber(this._global_investment_data.schedule.total_interest_earned[_]-this._global_investment_data.schedule.total_interest_earned[_-1],0),this._global_investment_data.schedule.total_value_investments[_]=0===_?0:this._calculators.roundNumber(this._global_investment_data.schedule.value_addition[_]+this._global_investment_data.schedule.value_initial_investment[_],0),e+="<tr"+(1===t?' class="rowdark"':' class="rowlight"')+'><td width="50">'+this._global_investment_data.schedule.year[_]+'</td><td width="13%">'+this._global_investment_data.schedule.annual_investment[_]+'</td><td width="13%">'+this._global_investment_data.schedule.cumulative_investment[_]+'</td><td width="13%">'+this._global_investment_data.schedule.annual_interest[_]+'</td><td width="13%" class="col-highlight">'+this._global_investment_data.schedule.total_interest_earned[_]+'</td><td width="13%">'+this._global_investment_data.schedule.value_initial_investment[_]+'</td><td width="13%">'+this._global_investment_data.schedule.value_addition[_]+'</td><td class="col-highlight">'+this._global_investment_data.schedule.total_value_investments[_]+"</td></tr>\n",t=1-t;e+="</table>",document.getElementById("schedule").innerHTML=e},update_form:function(t){if(this._validate_inputs()){t&&$(t).addClass("user_changed");var e=parseInt(this.dom_form.initial_investment.value),_=parseInt(this.dom_form.regular_addition.value),a=this.dom_form.addition_period.options[this.dom_form.addition_period.options.selectedIndex].value;if(this.dom_form.interest_rate.value>99)return this._calculators.alert_form(this.dom_form.interest_rate,this._user_strings.alert_interest_rate_too_high),!1;var i=parseFloat(this.dom_form.interest_rate.value)/100,s=parseInt(this.dom_form.term_years.value);if(s>50)return this._calculators.alert_form(this.dom_form.term_years,this._user_strings.alert_term_years_too_high),!1;var n=this.dom_form.interest_compounded_type.options[this.dom_form.interest_compounded_type.options.selectedIndex].value,r={weekly:52,bi_weekly:26,monthly:12,quarterly:4,semi_annually:2,yearly:1},l=r[a],o=e+_*l*s,d=r[n],h=e*Math.pow(1+i/d,s*d),u=_*(l/d+(l/d-1)/2*i/d)*(Math.pow(1+i/d,s*d)-1)/(i/d),m=h+u,c=m-o;this._global_investment_data.initial_investment=e,this._global_investment_data.regular_addition=_,this._global_investment_data.interest_rate_percent=i,this._global_investment_data.nb_years=s,this._global_investment_data.addition_period_in_weeks=l,this._global_investment_data.interest_compounded_type_in_weeks=d,this.dom_form.amount_invested.value=this._calculators.roundNumber(o,2),this.dom_form.total_value_initial_investment.value=this._calculators.roundNumber(h,2),this.dom_form.total_value_periodic_addition.value=this._calculators.roundNumber(u,2),this.dom_form.total_value_investment.value=this._calculators.roundNumber(m,2),this.dom_form.total_interest_earned.value=this._calculators.roundNumber(c,2),this._update_schedule_obj(),this._chart_growth_initialized&&this.show_chart_growth()}},show_chart_growth:function(){var t=new google.visualization.DataTable;t.addColumn("number","years"),t.addColumn("number",this._user_strings.chart_growth_label_total_value_investment),t.addColumn({type:"string",role:"tooltip"}),t.addColumn("number",this._user_strings.chart_growth_label_total_interest_earned),t.addColumn({type:"string",role:"tooltip"});for(var e=[],_=0;_<this._global_investment_data.nb_years;_++)e[_]=[],e[_][0]=_+1,e[_][1]=this._global_investment_data.schedule.total_value_investments[_+1],e[_][2]=this._user.currency+this._global_investment_data.schedule.total_value_investments[_+1],e[_][3]=this._global_investment_data.schedule.total_interest_earned[_+1],e[_][4]=this._user.currency+this._global_investment_data.schedule.total_interest_earned[_+1];t.addRows(e);var a={title:this._user_strings.chart_growth_title_part1+this._global_investment_data.nb_years+this._user_strings.chart_growth_title_part2,titleTextStyle:{color:"black",fontName:"Arial,Helvetica,sans-serif",fontSize:18},colors:["#9fd0ee","#1f83c2"],hAxis:{title:this._user_strings.chart_growth_label_h_axis,textStyle:{fontSize:10}},chartArea:{width:"85%",height:"70%"},legend:{position:"top"},focusTarget:"category",areaOpacity:1};new google.visualization.AreaChart(document.getElementById("chart_growth")).draw(t,a),this._chart_growth_initialized=!0}};
